<!DOCTYPE html>
<html lang="zh-cn">
        <head>
      <meta charset="utf-8"/>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
      <title>使用Django创建Blog - JavaChen Blog</title>
      <meta name="author" content="JavaChen"/>
      <meta name="description" content="本文使用 django、bootstrap3 创建一个支持 markdown 语法的简单 blog，这是一个很好的学习 django 的例子，基本上涉及了 django 的方方面面。">
      <meta name="keywords" content="java,spring,spring mvc,spring boot,mybatis,hibernate,jdbc,hadoop,hive,mapreduce,hbase,hdfs,spark,yarn,impala,presto,impala,sentry,zookeeper,pentaho,kettle,solr,scala,python,javascript,angular,jquery,postgresql">
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
      <link rel="canonical" href="http://blog.javachen.com/2014/12/19/create-blog-using-django.html" />

      <link rel="stylesheet" href="/static/contrib/bootstrap/css/bootstrap.min.css" media="all" />
      <link rel="stylesheet" href="/static/css/style.css" media="all" />
      <link rel="stylesheet" href="/static/css/pygments.css" media="all" />
      <link rel="stylesheet" href="/static/contrib/font-awesome/css/font-awesome.min.css" media="all" />
      <link rel="stylesheet" type="text/css" href="/static/contrib/showup/showup.css" />

        <!-- fav and touch icons  -->
        <!-- Update these with your own images
        <link rel="shortcut icon" href="images/favicon.ico">
        <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
        <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
        -->

      <meta name="renderer" content="webkit|ie-stand">
      <meta name="baidu-site-verification" content="3HAhaWRiyR" />
      <meta name="360-site-verification" content="9b7a87a1d52051c96644f0a9b8b79898" />
      <meta name="sogou_site_verification" content="ofwXWFdthV"/>
      <meta property="wb:webmaster" content="b6081b2b8ab84c60" />
    </head>

    <body>
      <!--[if lte IE 9]>
<div class="alert alert-warning">
  <p>Your Internet Explorer is not supported. Please upgrade your Internet Explorer to version 9+, or use latest <a href="http://www.google.com/chrome/" target="_blank" class="alert-link">Google chrome</a>、<a href="http://www.mozilla.org/firefox/" target="_blank" class="alert-link">Mozilla Firefox</a>.</p>
  <p>If you are using IE 9 or later, make sure you <a href="http://windows.microsoft.com/en-us/internet-explorer/use-compatibility-view#ie=ie-8" target="_blank" class="alert-link">turn off "Compatibility view"</a>.</p>
</div>
<![endif]-->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">JavaChen Blog</a>
        </div>
        <div class="navbar-collapse collapse">
            <form id="search-form" class="form-group navbar-form navbar-right" role="search">
                  <div class="form-group">
                    <input type="text" name="q" value=""  id="query" class="form-control" placeholder="搜索" required autocomplete="off" ></input>
                    <input type="submit" class="btn btn-default" value=" Go" ></input>
                  </div>
              </form>
            <ul class="nav navbar-nav">
              <li><a href="/archive.html" title="Archive"><span class='fa fa-archive fa-2x'></span></a></li>
              <li><a href="/categories.html" title="Categories"><span class='fa fa-navicon fa-2x'></span></a></li>
              <li><a href="/tags.html" title="Tags"><span class='fa fa-tags fa-2x'></span></a></li>
              <li><a href="/about.html" title="About"><span class='fa fa-user fa-2x'></span></a></li>
              
              <li><a href="https://github.com/javachen" target="_blank" title="Github"><span class='fa fa-github fa-2x'></span></a></li>
              
              
              
              
              
              <li><a href="http://weibo.com/chenzhijun" target="_blank" title="Weibo"><span class="fa fa-weibo fa-2x"></span></a></li>
              
              <li><a href="/rss.xml" target="_blank" title="RSS"><span class='fa fa-rss fa-2x'></span></a></li>
            </ul>
        </div>

        </div><!--/.nav-collapse -->
      </div>
</div>

      <div id="wrap">
          <div class="container">
                 <div id="content">
          <ul class="pager hidden-print">
               
                <li class="previous"><a href="/2014/12/02/some-usages-of-jpa.html" title="JPA的使用"><i class="fa fa-angle-double-left"></i>&nbsp;JPA的使用</a></li>
                
                
                <li class="next"><a href="/2014/12/23/thread-in-python.html" title="Python中的多线程">Python中的多线程&nbsp;<i class="fa fa-angle-double-right"></i></a></li>
                
          </ul>

           <div id="post" class="clearfix">
              <div id="post-title" class="page-header text-center">
                  <h1> 使用Django创建Blog  </h1>
              </div>
              <p class="text-muted clearfix">
                  <span class="pull-right">2014.12.19 | <a href="#comments">Comments</a></span>
              </p>
              <div id="qr" class="qrcode visible-lg"></div>

              <div id="post-text">
                    <p>本文参考 <a href="http://www.yaconiello.com/blog/part-1-creating-blog-system-using-django-markdown/">Part 1: Creating a blog system using django + markdown</a> 使用 django、bootstrap3 创建一个支持 markdown 语法的简单 blog，这是一个很好的学习 django 的例子，基本上涉及了 django 的方方面面，本文中相关的源码见 <a href="https://github.com/javachen/django_blog">github</a>。</p>

<p>相对于原文做了一些修改：</p>

<ul>
  <li>基于 django1.7，修复了不兼容的配置</li>
  <li>前端使用 bootstrap3，并修改了页面的一些内容</li>
  <li>【TODO】代码中关键的地方添加注释，帮助理解</li>
</ul>

<h1 id="section">1. 安装依赖</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>pip install markdown pygments django-pagedown
</code></pre>
</div>

<p><strong>说明：</strong>我使用的 django 版本为 <code class="highlighter-rouge">1.7</code>。</p>

<h1 id="section-1">2. 创建项目</h1>

<p>创建项目 django_blog 和 blog app：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>django-admin.py startproject django_blog
python manage.py startapp blog
</code></pre>
</div>

<h3 id="settingspy">修改 settings.py</h3>

<p>设置 SITE_ID 并修改时区等：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">SITE_ID</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">LANGUAGE_CODE</span> <span class="o">=</span> <span class="s">'zh_CN'</span>

<span class="n">TIME_ZONE</span> <span class="o">=</span> <span class="s">'Asia/Shanghai'</span>

<span class="n">USE_TZ</span> <span class="o">=</span> <span class="bp">True</span> 
</code></pre>
</div>

<p>添加 app:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">'django.contrib.admin'</span><span class="p">,</span>
    <span class="s">'django.contrib.sites'</span><span class="p">,</span>
    <span class="s">'django.contrib.auth'</span><span class="p">,</span>
    <span class="s">'django.contrib.contenttypes'</span><span class="p">,</span>
    <span class="s">'django.contrib.sessions'</span><span class="p">,</span>
    <span class="s">'django.contrib.messages'</span><span class="p">,</span>
    <span class="s">'django.contrib.staticfiles'</span><span class="p">,</span>
    <span class="s">'pagedown'</span><span class="p">,</span> <span class="c"># App for adding markdown preview to the django admin</span>
    <span class="s">'blog'</span><span class="p">,</span> <span class="c"># Blog Module</span>
    <span class="s">'django.contrib.comments'</span><span class="p">,</span> <span class="c"># comments for the blog</span>

<span class="p">)</span>
</code></pre>
</div>

<p>设置静态文件目录和模板目录：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c"># Additional locations of static files</span>
<span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span><span class="s">'static'</span><span class="p">),</span>
    <span class="c"># Put strings here, like "/home/html/static" or "C:/www/django/static".</span>
    <span class="c"># Always use forward slashes, even on Windows.</span>
    <span class="c"># Don't forget to use absolute paths, not relative paths.</span>
<span class="p">)</span>

<span class="c"># List of finder classes that know how to find static files in</span>
<span class="c"># various locations.</span>
<span class="n">STATICFILES_FINDERS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">'django.contrib.staticfiles.finders.FileSystemFinder'</span><span class="p">,</span>
    <span class="s">'django.contrib.staticfiles.finders.AppDirectoriesFinder'</span><span class="p">,</span>
<span class="c">#    'django.contrib.staticfiles.finders.DefaultStorageFinder',</span>
<span class="p">)</span>

<span class="n">TEMPLATE_DIRS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span><span class="s">'templates'</span><span class="p">),</span>
<span class="p">)</span>
<span class="c"># List of callables that know how to import templates from various sources.</span>
<span class="n">TEMPLATE_LOADERS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">'django.template.loaders.filesystem.Loader'</span><span class="p">,</span>
    <span class="s">'django.template.loaders.app_directories.Loader'</span><span class="p">,</span>
<span class="p">)</span>
</code></pre>
</div>

<h1 id="section-2">3. 创建模型</h1>

<p>在 blog/models.py 中创建模型 Category 和 Article：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext</span> <span class="k">as</span> <span class="n">_</span>
<span class="kn">from</span> <span class="nn">markdown</span> <span class="kn">import</span> <span class="n">markdown</span>

<span class="k">class</span> <span class="nc">Category</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Category Model"""</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u'Title'</span><span class="p">),</span>
        <span class="n">help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u' '</span><span class="p">),</span>
        <span class="n">max_length</span> <span class="o">=</span> <span class="mi">255</span>
    <span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u'Slug'</span><span class="p">),</span>
        <span class="n">help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u'Uri identifier.'</span><span class="p">),</span>
        <span class="n">max_length</span> <span class="o">=</span> <span class="mi">255</span><span class="p">,</span>
        <span class="n">unique</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">app_label</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u'blog'</span><span class="p">)</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u"Category"</span><span class="p">)</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u"Categories"</span><span class="p">)</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s">'title'</span><span class="p">,]</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">"</span><span class="si">%</span><span class="s">s"</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,)</span>

<span class="k">class</span> <span class="nc">Article</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Article Model"""</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u'Title'</span><span class="p">),</span>
        <span class="n">help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u' '</span><span class="p">),</span>
        <span class="n">max_length</span> <span class="o">=</span> <span class="mi">255</span>
    <span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u'Slug'</span><span class="p">),</span>
        <span class="n">help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u'Uri identifier.'</span><span class="p">),</span>
        <span class="n">max_length</span> <span class="o">=</span> <span class="mi">255</span><span class="p">,</span>
        <span class="n">unique</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="p">)</span>
    <span class="n">content_markdown</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u'Content (Markdown)'</span><span class="p">),</span>
        <span class="n">help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u' '</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">content_markup</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u'Content (Markup)'</span><span class="p">),</span>
        <span class="n">help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u' '</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span>
        <span class="n">Category</span><span class="p">,</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u'Categories'</span><span class="p">),</span>
        <span class="n">help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u' '</span><span class="p">),</span>
        <span class="n">null</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
        <span class="n">blank</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="p">)</span>
    <span class="n">date_publish</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u'Publish Date'</span><span class="p">),</span>
        <span class="n">help_text</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u' '</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">app_label</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u'blog'</span><span class="p">)</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u"Article"</span><span class="p">)</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">u"Articles"</span><span class="p">)</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s">'-date_publish'</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content_markup</span> <span class="o">=</span> <span class="n">markdown</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content_markdown</span><span class="p">,</span> <span class="p">[</span><span class="s">'codehilite'</span><span class="p">])</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Article</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">"</span><span class="si">%</span><span class="s">s"</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,)</span>
</code></pre>
</div>

<p>将模型加入到 django admin，修改 blog/admin.py:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">pagedown.widgets</span> <span class="kn">import</span> <span class="n">AdminPagedownWidget</span>
<span class="kn">from</span> <span class="nn">models</span> <span class="kn">import</span> <span class="n">Category</span><span class="p">,</span> <span class="n">Article</span>

<span class="k">class</span> <span class="nc">CategoryAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">prepopulated_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s">'slug'</span><span class="p">:</span> <span class="p">(</span><span class="s">'title'</span><span class="p">,)}</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'title'</span><span class="p">,</span> <span class="p">)</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'title'</span><span class="p">,</span> <span class="p">)</span>
    <span class="n">fieldsets</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="bp">None</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s">'fields'</span><span class="p">:</span> <span class="p">(</span><span class="s">'title'</span><span class="p">,</span> <span class="s">'slug'</span><span class="p">,)</span>
            <span class="p">}</span>
        <span class="p">),</span>
    <span class="p">)</span>

<span class="k">class</span> <span class="nc">ArticleForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Article</span>
        <span class="n">widgets</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'content_markdown'</span> <span class="p">:</span> <span class="n">AdminPagedownWidget</span><span class="p">(),</span>
        <span class="p">}</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[</span><span class="s">'content_markup'</span><span class="p">,]</span>

<span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">ArticleForm</span>
    <span class="n">prepopulated_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s">'slug'</span><span class="p">:</span> <span class="p">(</span><span class="s">'title'</span><span class="p">,)}</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'title'</span><span class="p">,</span> <span class="s">'date_publish'</span><span class="p">)</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'title'</span><span class="p">,</span> <span class="s">'content_markdown'</span><span class="p">,)</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span><span class="s">'categories'</span><span class="p">,)</span>
    <span class="n">fieldsets</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="bp">None</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s">'fields'</span><span class="p">:</span> <span class="p">(</span><span class="s">'title'</span><span class="p">,</span> <span class="s">'slug'</span><span class="p">,</span> <span class="s">'content_markdown'</span><span class="p">,</span> <span class="s">'categories'</span><span class="p">,</span> <span class="s">'date_publish'</span><span class="p">,)</span>
            <span class="p">}</span>
        <span class="p">),</span>
    <span class="p">)</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Category</span><span class="p">,</span> <span class="n">CategoryAdmin</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Article</span><span class="p">,</span> <span class="n">ArticleAdmin</span><span class="p">)</span>
</code></pre>
</div>

<h1 id="url-">4. 创建 url 路由</h1>

<p>修改 django_blog/urls.py：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">blog.views</span> <span class="kn">import</span> <span class="n">index</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">''</span><span class="p">,</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^admin/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^$'</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'home'</span><span class="p">),</span>

    <span class="n">url</span><span class="p">(</span><span class="s">'^blog/archive/(?P&lt;year&gt;[</span><span class="err">\</span><span class="s">d]+)/(?P&lt;month&gt;[</span><span class="err">\</span><span class="s">d]+)/$'</span><span class="p">,</span> <span class="s">'blog.views.date_archive'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">"blog_date_archive"</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">'^blog/archive/(?P&lt;slug&gt;[-</span><span class="err">\</span><span class="s">w]+)/$'</span><span class="p">,</span> <span class="s">'blog.views.category_archive'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">"blog_category_archive"</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">'^blog/(?P&lt;slug&gt;[-</span><span class="err">\</span><span class="s">w]+)/$'</span><span class="p">,</span> <span class="s">'blog.views.single'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">"blog_article_single"</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">'^blog/$'</span><span class="p">,</span> <span class="s">'blog.views.index'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">"blog_article_index"</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^comments/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">'django.contrib.comments.urls'</span><span class="p">)),</span>
<span class="p">)</span>
</code></pre>
</div>

<h1 id="section-3">5. 创建视图</h1>

<p>创建 blog/views.py：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.core.paginator</span> <span class="kn">import</span> <span class="n">Paginator</span><span class="p">,</span> <span class="n">EmptyPage</span><span class="p">,</span> <span class="n">PageNotAnInteger</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">get_object_or_404</span>
<span class="kn">from</span> <span class="nn">models</span> <span class="kn">import</span> <span class="n">Category</span><span class="p">,</span> <span class="n">Article</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render_to_response</span>
<span class="kn">import</span> <span class="nn">calendar</span><span class="o">,</span> <span class="nn">datetime</span>

<span class="c"># Create your views here.</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""The news index"""</span>
    <span class="n">archive_dates</span> <span class="o">=</span> <span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">dates</span><span class="p">(</span><span class="s">'date_publish'</span><span class="p">,</span><span class="s">'month'</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s">'DESC'</span><span class="p">)</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="n">Category</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span>

    <span class="n">page</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'page'</span><span class="p">)</span>
    <span class="n">article_queryset</span> <span class="o">=</span> <span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span>
    <span class="n">paginator</span> <span class="o">=</span> <span class="n">Paginator</span><span class="p">(</span><span class="n">article_queryset</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">articles</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">PageNotAnInteger</span><span class="p">:</span>
        <span class="c"># If page is not an integer, deliver first page.</span>
        <span class="n">articles</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">EmptyPage</span><span class="p">:</span>
        <span class="c"># If page is out of range (e.g. 9999), deliver last page of results.</span>
        <span class="n">articles</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="n">paginator</span><span class="o">.</span><span class="n">num_pages</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span>
        <span class="n">request</span><span class="p">,</span>
        <span class="s">"blog/article/index.html"</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s">"articles"</span> <span class="p">:</span> <span class="n">articles</span><span class="p">,</span>
            <span class="s">"archive_dates"</span> <span class="p">:</span> <span class="n">archive_dates</span><span class="p">,</span>
            <span class="s">"categories"</span> <span class="p">:</span> <span class="n">categories</span>
        <span class="p">}</span>
    <span class="p">)</span>

<span class="k">def</span> <span class="nf">single</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">slug</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""A single article"""</span>
    <span class="n">article</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Article</span><span class="p">,</span> <span class="n">slug</span><span class="o">=</span><span class="n">slug</span><span class="p">)</span>
    <span class="n">archive_dates</span> <span class="o">=</span> <span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">dates</span><span class="p">(</span><span class="s">'date_publish'</span><span class="p">,</span><span class="s">'month'</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s">'DESC'</span><span class="p">)</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="n">Category</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span>
        <span class="n">request</span><span class="p">,</span>
        <span class="s">"blog/article/single.html"</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s">"article"</span> <span class="p">:</span> <span class="n">article</span><span class="p">,</span>
            <span class="s">"archive_dates"</span> <span class="p">:</span> <span class="n">archive_dates</span><span class="p">,</span>
            <span class="s">"categories"</span> <span class="p">:</span> <span class="n">categories</span>
        <span class="p">}</span>
    <span class="p">)</span>

<span class="k">def</span> <span class="nf">date_archive</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""The blog date archive"""</span>
    <span class="c"># this archive pages dates</span>
    <span class="n">year</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
    <span class="n">month</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">month</span><span class="p">)</span>
    <span class="n">month_range</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="n">monthrange</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">)</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="n">month</span><span class="p">,</span><span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="c">#.replace(tzinfo=utc)</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="n">month_range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="c">#.replace(tzinfo=utc)</span>
    <span class="n">archive_dates</span> <span class="o">=</span> <span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">dates</span><span class="p">(</span><span class="s">'date_publish'</span><span class="p">,</span><span class="s">'month'</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s">'DESC'</span><span class="p">)</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="n">Category</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span>

    <span class="c"># Pagination</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'page'</span><span class="p">)</span>
    <span class="n">article_queryset</span> <span class="o">=</span> <span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">date_publish__range</span><span class="o">=</span><span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">date</span><span class="p">(),</span> <span class="n">end</span><span class="o">.</span><span class="n">date</span><span class="p">()))</span>
    <span class="n">paginator</span> <span class="o">=</span> <span class="n">Paginator</span><span class="p">(</span><span class="n">article_queryset</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">articles</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">PageNotAnInteger</span><span class="p">:</span>
        <span class="c"># If page is not an integer, deliver first page.</span>
        <span class="n">articles</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">EmptyPage</span><span class="p">:</span>
        <span class="c"># If page is out of range (e.g. 9999), deliver last page of results.</span>
        <span class="n">articles</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="n">paginator</span><span class="o">.</span><span class="n">num_pages</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span>
        <span class="n">request</span><span class="p">,</span>
        <span class="s">"blog/article/date_archive.html"</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s">"start"</span> <span class="p">:</span> <span class="n">start</span><span class="p">,</span>
            <span class="s">"end"</span> <span class="p">:</span> <span class="n">end</span><span class="p">,</span>
            <span class="s">"articles"</span> <span class="p">:</span> <span class="n">articles</span><span class="p">,</span>
            <span class="s">"archive_dates"</span> <span class="p">:</span> <span class="n">archive_dates</span><span class="p">,</span>
            <span class="s">"categories"</span> <span class="p">:</span> <span class="n">categories</span>
        <span class="p">}</span>
    <span class="p">)</span>

<span class="k">def</span> <span class="nf">category_archive</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">slug</span><span class="p">):</span>
    <span class="n">archive_dates</span> <span class="o">=</span> <span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">dates</span><span class="p">(</span><span class="s">'date_publish'</span><span class="p">,</span><span class="s">'month'</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s">'DESC'</span><span class="p">)</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="n">Category</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span>
    <span class="n">category</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Category</span><span class="p">,</span> <span class="n">slug</span><span class="o">=</span><span class="n">slug</span><span class="p">)</span>

    <span class="c"># Pagination</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'page'</span><span class="p">)</span>
    <span class="n">article_queryset</span> <span class="o">=</span> <span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="n">category</span><span class="p">)</span>
    <span class="n">paginator</span> <span class="o">=</span> <span class="n">Paginator</span><span class="p">(</span><span class="n">article_queryset</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">articles</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">PageNotAnInteger</span><span class="p">:</span>
        <span class="c"># If page is not an integer, deliver first page.</span>
        <span class="n">articles</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">EmptyPage</span><span class="p">:</span>
        <span class="c"># If page is out of range (e.g. 9999), deliver last page of results.</span>
        <span class="n">articles</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="n">paginator</span><span class="o">.</span><span class="n">num_pages</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span>
        <span class="n">request</span><span class="p">,</span>
        <span class="s">"blog/article/category_archive.html"</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s">"articles"</span> <span class="p">:</span> <span class="n">articles</span><span class="p">,</span>
            <span class="s">"archive_dates"</span> <span class="p">:</span> <span class="n">archive_dates</span><span class="p">,</span>
            <span class="s">"categories"</span> <span class="p">:</span> <span class="n">categories</span><span class="p">,</span>
            <span class="s">"category"</span> <span class="p">:</span> <span class="n">category</span>
        <span class="p">}</span>
    <span class="p">)</span>
</code></pre>
</div>

<h1 id="section-4">6. 创建模板</h1>

<p>创建 templates/blog/base.html：</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>

        <span class="nt">&lt;title&gt;</span>{% block title %}{% endblock %}<span class="nt">&lt;/title&gt;</span>

        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>

        <span class="c">&lt;!-- CSS --&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://cdn.bootcss.com/bootstrap/3.3.1/css/bootstrap.min.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://cdn.bootcss.com/bootstrap/3.3.1/css/bootstrap-theme.min.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"{{ STATIC_URL }}css/style.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"{{ STATIC_URL }}css/pygments.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>

        <span class="c">&lt;!-- HTML5 shim, for IE6-8 support of HTML5 elements --&gt;</span>
        <span class="c">&lt;!--[if lt IE 9]&gt;
        &lt;script src="http://html5shim.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt;
        &lt;![endif]--&gt;</span>
    <span class="nt">&lt;/head&gt;</span>

    <span class="nt">&lt;body&gt;</span>

        <span class="c">&lt;!-- Part 1: Wrap all page content here --&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"wrap"</span><span class="nt">&gt;</span>

            <span class="c">&lt;!-- Begin page content --&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"masthead"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"nav nav-pills pull-right"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;li</span><span class="err">{%</span> <span class="na">if</span> <span class="err">"/"</span> <span class="err">==</span> <span class="na">request</span><span class="err">.</span><span class="na">get_full_path</span> <span class="err">%}</span> <span class="na">class=</span><span class="s">"active"</span><span class="err">{%</span> <span class="na">endif</span> <span class="err">%}</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"/"</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                        <span class="nt">&lt;li</span> <span class="err">{%</span> <span class="na">if</span> <span class="err">"/</span><span class="na">blog</span><span class="err">/"</span> <span class="err">==</span> <span class="na">request</span><span class="err">.</span><span class="na">get_full_path</span> <span class="err">%}</span> <span class="na">class=</span><span class="s">"active"</span><span class="err">{%</span> <span class="na">endif</span> <span class="err">%}</span> <span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{% url 'blog_article_index' %}"</span><span class="nt">&gt;</span>Blog<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                        <span class="nt">&lt;li</span> <span class="err">{%</span> <span class="na">if</span> <span class="err">"/</span><span class="na">about</span><span class="err">/"</span> <span class="err">==</span> <span class="na">request</span><span class="err">.</span><span class="na">get_full_path</span> <span class="err">%}</span> <span class="na">class=</span><span class="s">"active"</span><span class="err">{%</span> <span class="na">endif</span> <span class="err">%}</span> <span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{% url 'blog_article_index' %}"</span><span class="nt">&gt;</span>About<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                    <span class="nt">&lt;/ul&gt;</span>
                    <span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">"text-muted"</span><span class="nt">&gt;</span>My Blog<span class="nt">&lt;/h3&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"page-header"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"lead"</span><span class="nt">&gt;</span>Simple is beauty!<span class="nt">&lt;/p&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                {% block breadcrumb %}{% endblock %}
                {% block content %}{% endblock%}
            <span class="nt">&lt;/div&gt;</span>

            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"push"</span><span class="nt">&gt;&lt;/div&gt;</span>

        <span class="nt">&lt;/div&gt;</span>

        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"footer"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"muted credit"</span><span class="nt">&gt;</span>©2014<span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">"float:right;"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"/legal/"</span><span class="nt">&gt;</span>Legal<span class="nt">&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</span>

            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>

        <span class="c">&lt;!-- Le javascript
        ================================================== --&gt;</span>
        <span class="c">&lt;!-- Placed at the end of the document so the pages load faster --&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://cdn.bootcss.com/bootstrap/3.3.1/js/bootstrap.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></div>

<p>其他 html 文件见<a href="https://github.com/javachen/django_blog">源代码</a>。</p>

<h1 id="section-5">7. 运行项目</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>python manage.py makemigrations
python manage.py migrate
python manage.py syncdb
python manage.py runserver
</code></pre>
</div>

<p>打开浏览器访问后台页面 <a href="http://localhost:8000/admin">http://localhost:8000/admin</a> 添加分类和文章，然后再访问前台页面 <a href="http://localhost:8000/">http://localhost:8000/</a>。</p>

<h1 id="section-6">8. 参考文章</h1>

<ul>
  <li><a href="http://www.yaconiello.com/blog/part-1-creating-blog-system-using-django-markdown/">Part 1: Creating a blog system using django + markdown</a></li>
  <li><a href="http://www.yaconiello.com/blog/part-2-creating-blog-system-using-django-markdown/">Part 2: Creating a blog system using django + markdown</a></li>
  <li><a href="http://www.yaconiello.com/blog/part-3-creating-blog-system-using-django-markdown/">Part 3: Creating a blog system using django + markdown</a></li>
</ul>

                    <br/>
                    <div class="well">
                        原创文章，转载请注明： 转载自<a href="http://blog.javachen.com">JavaChen Blog</a>，作者：<a href="http://blog.javachen.com/about.html">JavaChen</a><br/>
                        本文链接地址：<a href="/2014/12/19/create-blog-using-django.html">http://blog.javachen.com/2014/12/19/create-blog-using-django.html</a><br/>
                        本文基于<a target="_blank" title="Creative Commons Attribution 2.5 China Mainland License" href="http://creativecommons.org/licenses/by/2.5/cn/">署名2.5中国大陆许可协议</a>发布，欢迎转载、演绎或用于商业目的，但是必须保留本文署名和文章链接。
                        如您有任何疑问或者授权方面的协商，请邮件联系我</a>。
                    </div>
                    <div class="col-md-6">
                      <p class="text-success hidden-print"><i class="fa fa-external-link"></i> <a href="/2014/12/19/create-blog-using-django.html">使用Django创建Blog</a></p>
                    </div>
                    <div class="col-md-6">
                       <p class="meta hidden-print pull-right">
                        
                            <i class="fa fa-folder-open"></i>
                            
                            <a class="btn btn-default btn-sm" href="/categories.html#python">python</a>
                          
                        
                        
                            <i class="fa fa-tags"></i>
                            
                            <a class="btn btn-default btn-sm" href="/tags.html#python">python</a>
                          
                            <a class="btn btn-default btn-sm" href="/tags.html#django">django</a>
                          
                        </p>
                    </div>
               </div><!--#post-text-->
          </div><!--#post-->
      </div> <!--#content-->

      <div id="post-comment" class="hidden-print">
      
<div id="comments">
  <div class="ds-thread" data-thread-key="/2014/12/19/create-blog-using-django.html" data-url="http://blog.javachen.com/2014/12/19/create-blog-using-django.html" data-title="使用Django创建Blog"></div>
</div>



      </div>


          </div>
          <a href="#" class="btn back-to-top btn-dark btn-fixed-bottom hidden-print"><i class="fa fa-chevron-up"></i></a>
      </div>
      <div id="footer">
          <div class="container hidden-print">
              <p class="text-center"><i class="fa fa-copyright"></i> 2016 JavaChen Blog. Theme designed by <a href="/about.html" target="_blank" title="">JavaChen</a> with <a href="https://github.com/mojombo/jekyll/">Jekyll</a>, <a href="http://twitter.github.com/bootstrap/">Bootstrap</a> and <a href="http://fortawesome.github.com/Font-Awesome/">Font Awesome</a>.
  	            

            
            <script>
              var _hmt = _hmt || [];
              (function() {
                var hm = document.createElement("script");
                hm.src = "//hm.baidu.com/hm.js?50bc6f5d9b045b5895ff44f8bbdbc611";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
              })();
            </script>
            
    </p>
          </div>
      </div>

      <script type="text/javascript" src="/static/contrib/jquery/jquery.min.js"></script>
      <script type="text/javascript" src="/static/contrib/bootstrap/js/bootstrap.min.js"></script>
      <script type="text/javascript" src="/static/contrib/qrcode/jquery.qrcode.min.js"></script>
      <script type="text/javascript" src="/static/contrib/showup/showup.js"></script>
      <script type="text/javascript" src="/static/js/core.js"></script>
      
      <script type="text/javascript">
      var duoshuoQuery = {short_name:"javachen"};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = 'http://static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] ||
        document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>
      

      <script type="text/javascript">
      $('#qr').qrcode({
          width: 128,
          height: 128,
          text: 'http://blog.javachen.com/2014/12/19/create-blog-using-django.html'
      });
      </script>
  </body>
</html>
